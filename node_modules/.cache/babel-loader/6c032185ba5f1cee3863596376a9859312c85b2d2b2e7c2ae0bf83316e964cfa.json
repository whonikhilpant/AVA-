{"ast":null,"code":"import React,{useEffect,useState}from'react';import{AreaChart,Area,XAxis,YAxis,CartesianGrid,Tooltip,ResponsiveContainer,Legend}from'recharts';import{TrendingUp}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function getDayOfWeek(dateString){const days=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];return days[new Date(dateString).getDay()];}const CustomTooltip=_ref=>{let{active,payload,label}=_ref;if(active&&payload&&payload.length){return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-3 rounded shadow border border-primary-100\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-primary-500\",children:label}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"Leads: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-accent-orange\",children:payload[0].value})]})]});}return null;};const Leads=()=>{const[dailyLeads,setDailyLeads]=useState([]);const user=JSON.parse(localStorage.getItem('user')||'{}');const employeeId=user===null||user===void 0?void 0:user.employeeId;const month=new Date().toISOString().slice(0,7);// e.g., \"2025-07\"\nuseEffect(()=>{if(!employeeId)return;fetch(\"http://leadinfo.site/employee/get_reports_by_day.php?month=\".concat(month,\"&employeeId=\").concat(employeeId)).then(res=>res.json()).then(json=>{if(json.success){setDailyLeads(json.data);}});},[employeeId,month]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"text-accent-orange w-7 h-7\"}),\" Leads\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 bg-gradient-to-br from-primary-50 via-accent-orange/10 to-white p-6 rounded-2xl shadow-lg border border-primary-100\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold mb-4 flex items-center gap-2 text-primary-700\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"w-5 h-5 text-accent-orange\"}),\" Day-wise Leads (This Month)\"]}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:340,children:/*#__PURE__*/_jsxs(AreaChart,{data:dailyLeads,margin:{top:20,right:30,left:0,bottom:0},children:[/*#__PURE__*/_jsxs(\"defs\",{children:[/*#__PURE__*/_jsxs(\"linearGradient\",{id:\"colorLeadsArea\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[/*#__PURE__*/_jsx(\"stop\",{offset:\"0%\",stopColor:\"#ec4899\",stopOpacity:0.25}),/*#__PURE__*/_jsx(\"stop\",{offset:\"50%\",stopColor:\"#ff7c2b\",stopOpacity:0.15}),/*#__PURE__*/_jsx(\"stop\",{offset:\"100%\",stopColor:\"#1fa2ff\",stopOpacity:0.08})]}),/*#__PURE__*/_jsxs(\"linearGradient\",{id:\"colorLeadsLine\",x1:\"0\",y1:\"0\",x2:\"1\",y2:\"0\",children:[/*#__PURE__*/_jsx(\"stop\",{offset:\"0%\",stopColor:\"#ec4899\"}),/*#__PURE__*/_jsx(\"stop\",{offset:\"50%\",stopColor:\"#ff7c2b\"}),/*#__PURE__*/_jsx(\"stop\",{offset:\"100%\",stopColor:\"#1fa2ff\"})]})]}),/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\",stroke:\"#fbcfe8\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"date\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{content:/*#__PURE__*/_jsx(CustomTooltip,{})}),/*#__PURE__*/_jsx(Legend,{verticalAlign:\"top\",height:36}),/*#__PURE__*/_jsx(Area,{type:\"monotone\",dataKey:\"leads\",stroke:\"url(#colorLeadsLine)\",fill:\"url(#colorLeadsArea)\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-2xl shadow border border-primary-100\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4 text-primary-700\",children:\"Daily Leads\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-primary-100\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-primary-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-bold text-primary-700 uppercase tracking-wider\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-bold text-accent-orange uppercase tracking-wider\",children:\"Day\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-bold text-accent-blue uppercase tracking-wider\",children:\"No of Leads\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-primary-100\",children:dailyLeads.map((row,idx)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-primary-50 transition\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:row.date}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:getDayOfWeek(row.date)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:row.leads})]},idx))})]})]})]});};export default Leads;","map":{"version":3,"names":["React","useEffect","useState","AreaChart","Area","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","Legend","TrendingUp","jsx","_jsx","jsxs","_jsxs","getDayOfWeek","dateString","days","Date","getDay","CustomTooltip","_ref","active","payload","label","length","className","children","value","Leads","dailyLeads","setDailyLeads","user","JSON","parse","localStorage","getItem","employeeId","month","toISOString","slice","fetch","concat","then","res","json","success","data","width","height","margin","top","right","left","bottom","id","x1","y1","x2","y2","offset","stopColor","stopOpacity","strokeDasharray","stroke","dataKey","content","verticalAlign","type","fill","map","row","idx","date","leads"],"sources":["C:/Users/Admin/AVA-/src/pages/Leads.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport {\r\n  AreaChart, Area, XAxis, YAxis, CartesianGrid,\r\n  Tooltip, ResponsiveContainer, Legend\r\n} from 'recharts';\r\nimport { TrendingUp } from 'lucide-react';\r\n\r\nfunction getDayOfWeek(dateString: string) {\r\n  const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n  return days[new Date(dateString).getDay()];\r\n}\r\n\r\nconst CustomTooltip = ({ active, payload, label }: any) => {\r\n  if (active && payload && payload.length) {\r\n    return (\r\n      <div className=\"bg-white p-3 rounded shadow border border-primary-100\">\r\n        <p className=\"font-semibold text-primary-500\">{label}</p>\r\n        <p className=\"text-sm\">Leads: <span className=\"font-bold text-accent-orange\">{payload[0].value}</span></p>\r\n      </div>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nconst Leads: React.FC = () => {\r\n  const [dailyLeads, setDailyLeads] = useState([]);\r\n  const user = JSON.parse(localStorage.getItem('user') || '{}');\r\n  const employeeId = user?.employeeId;\r\n  const month = new Date().toISOString().slice(0, 7); // e.g., \"2025-07\"\r\n\r\n  useEffect(() => {\r\n    if (!employeeId) return;\r\n\r\n    fetch(`http://leadinfo.site/employee/get_reports_by_day.php?month=${month}&employeeId=${employeeId}`)\r\n      .then(res => res.json())\r\n      .then(json => {\r\n        if (json.success) {\r\n          setDailyLeads(json.data);\r\n        }\r\n      });\r\n  }, [employeeId, month]);\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4 flex items-center gap-2\">\r\n        <TrendingUp className=\"text-accent-orange w-7 h-7\" /> Leads\r\n      </h1>\r\n\r\n      {/* Month-wise Area Chart */}\r\n      <div className=\"mb-8 bg-gradient-to-br from-primary-50 via-accent-orange/10 to-white p-6 rounded-2xl shadow-lg border border-primary-100\">\r\n        <h2 className=\"text-lg font-semibold mb-4 flex items-center gap-2 text-primary-700\">\r\n          <TrendingUp className=\"w-5 h-5 text-accent-orange\" /> Day-wise Leads (This Month)\r\n        </h2>\r\n        <ResponsiveContainer width=\"100%\" height={340}>\r\n          <AreaChart data={dailyLeads} margin={{ top: 20, right: 30, left: 0, bottom: 0 }}>\r\n            <defs>\r\n              <linearGradient id=\"colorLeadsArea\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                <stop offset=\"0%\" stopColor=\"#ec4899\" stopOpacity={0.25} />\r\n                <stop offset=\"50%\" stopColor=\"#ff7c2b\" stopOpacity={0.15} />\r\n                <stop offset=\"100%\" stopColor=\"#1fa2ff\" stopOpacity={0.08} />\r\n              </linearGradient>\r\n              <linearGradient id=\"colorLeadsLine\" x1=\"0\" y1=\"0\" x2=\"1\" y2=\"0\">\r\n                <stop offset=\"0%\" stopColor=\"#ec4899\" />\r\n                <stop offset=\"50%\" stopColor=\"#ff7c2b\" />\r\n                <stop offset=\"100%\" stopColor=\"#1fa2ff\" />\r\n              </linearGradient>\r\n            </defs>\r\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#fbcfe8\" />\r\n            <XAxis dataKey=\"date\" />\r\n            <YAxis />\r\n            <Tooltip content={<CustomTooltip />} />\r\n            <Legend verticalAlign=\"top\" height={36} />\r\n            <Area type=\"monotone\" dataKey=\"leads\" stroke=\"url(#colorLeadsLine)\" fill=\"url(#colorLeadsArea)\" />\r\n          </AreaChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n\r\n      {/* Daily Leads Table */}\r\n      <div className=\"bg-white p-4 rounded-2xl shadow border border-primary-100\">\r\n        <h2 className=\"text-lg font-semibold mb-4 text-primary-700\">Daily Leads</h2>\r\n        <table className=\"min-w-full divide-y divide-primary-100\">\r\n          <thead className=\"bg-primary-50\">\r\n            <tr>\r\n              <th className=\"px-6 py-3 text-left text-xs font-bold text-primary-700 uppercase tracking-wider\">Date</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-bold text-accent-orange uppercase tracking-wider\">Day</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-bold text-accent-blue uppercase tracking-wider\">No of Leads</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"bg-white divide-y divide-primary-100\">\r\n            {dailyLeads.map((row: any, idx: number) => (\r\n              <tr key={idx} className=\"hover:bg-primary-50 transition\">\r\n                <td className=\"px-6 py-4\">{row.date}</td>\r\n                <td className=\"px-6 py-4\">{getDayOfWeek(row.date)}</td>\r\n                <td className=\"px-6 py-4\">{row.leads}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Leads;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}