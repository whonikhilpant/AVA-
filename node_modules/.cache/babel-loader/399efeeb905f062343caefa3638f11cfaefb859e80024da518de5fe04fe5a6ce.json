{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Menu}from'lucide-react';import{useAuth}from'../../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Header=_ref=>{var _user$name;let{onMenuClick}=_ref;const{user}=useAuth();const employeeName=localStorage.getItem('employee_name')||'Employee';const empId=user===null||user===void 0?void 0:user.employeeId;const[passportPhoto,setPassportPhoto]=useState(null);useEffect(()=>{if(!empId)return;const fetchDocs=async()=>{try{const res=await fetch(\"https://leadinfo.site/employee/get_documents.php?empId=\".concat(empId));const data=await res.json();if(data.success){const passport=data.data.find(doc=>doc.document_type==='passport');if(passport){setPassportPhoto(\"https://leadinfo.site/employee/uploads/\".concat(passport.file_path));}}}catch(err){console.error('Failed to load passport photo',err);}};fetchDocs();},[empId]);return/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-[999]\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between h-16 px-4 sm:px-8 lg:px-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center md:hidden\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onMenuClick,className:\"text-gray-500 hover:text-gray-600 focus:outline-none\",\"aria-label\":\"Open sidebar\",children:/*#__PURE__*/_jsx(Menu,{className:\"h-6 w-6\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 px-4 flex justify-center lg:justify-end\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hidden sm:flex flex-col items-end\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-semibold text-gray-900\",children:[\"Welcome \",/*#__PURE__*/_jsx(\"span\",{className:\"text-primary-600 ml-1 text-sm\",children:employeeName})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:user===null||user===void 0?void 0:user.department})]}),passportPhoto?/*#__PURE__*/_jsx(\"img\",{src:passportPhoto,alt:\"Passport\",className:\"h-9 w-9 rounded-full object-cover border border-gray-300 shadow\"}):/*#__PURE__*/_jsx(\"div\",{className:\"h-9 w-9 rounded-full bg-gradient-to-br from-primary-500 via-accent-orange to-accent-blue flex items-center justify-center text-white font-bold\",children:user===null||user===void 0?void 0:(_user$name=user.name)===null||_user$name===void 0?void 0:_user$name.charAt(0).toUpperCase()})]})]})});};export default Header;","map":{"version":3,"names":["React","useEffect","useState","Menu","useAuth","jsx","_jsx","jsxs","_jsxs","Header","_ref","_user$name","onMenuClick","user","employeeName","localStorage","getItem","empId","employeeId","passportPhoto","setPassportPhoto","fetchDocs","res","fetch","concat","data","json","success","passport","find","doc","document_type","file_path","err","console","error","className","children","type","onClick","department","src","alt","name","charAt","toUpperCase"],"sources":["C:/Users/Admin/AVA-/src/components/Layout/Header.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Menu } from 'lucide-react';\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\ninterface UploadedDoc {\r\n  id: number;\r\n  document_type: string;\r\n  file_path: string;\r\n  uploaded_at: string;\r\n}\r\n\r\nconst Header: React.FC<{ onMenuClick?: () => void }> = ({ onMenuClick }) => {\r\n  const { user } = useAuth();\r\n  const employeeName = localStorage.getItem('employee_name') || 'Employee';\r\n  const empId = user?.employeeId;\r\n\r\n  const [passportPhoto, setPassportPhoto] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!empId) return;\r\n\r\n    const fetchDocs = async () => {\r\n      try {\r\n        const res = await fetch(`https://leadinfo.site/employee/get_documents.php?empId=${empId}`);\r\n        const data = await res.json();\r\n        if (data.success) {\r\n          const passport = data.data.find((doc: UploadedDoc) => doc.document_type === 'passport');\r\n          if (passport) {\r\n            setPassportPhoto(`https://leadinfo.site/employee/uploads/${passport.file_path}`);\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to load passport photo', err);\r\n      }\r\n    };\r\n\r\n    fetchDocs();\r\n  }, [empId]);\r\n\r\n  return (\r\n    <header className=\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-[999]\">\r\n      <div className=\"flex items-center justify-between h-16 px-4 sm:px-8 lg:px-12\">\r\n        {/* ðŸ”¸ Mobile Sidebar Toggle Button */}\r\n        <div className=\"flex items-center md:hidden\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onMenuClick}\r\n            className=\"text-gray-500 hover:text-gray-600 focus:outline-none\"\r\n            aria-label=\"Open sidebar\"\r\n          >\r\n            <Menu className=\"h-6 w-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Center */}\r\n        <div className=\"flex-1 px-4 flex justify-center lg:justify-end\" />\r\n\r\n        {/* ðŸ”¹ Right (Notifications & User Info) */}\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"hidden sm:flex flex-col items-end\">\r\n            <p className=\"text-sm font-semibold text-gray-900\">\r\n              Welcome <span className=\"text-primary-600 ml-1 text-sm\">{employeeName}</span>\r\n            </p>\r\n            <span className=\"text-xs text-gray-500\">{user?.department}</span>\r\n          </div>\r\n\r\n          {passportPhoto ? (\r\n            <img\r\n              src={passportPhoto}\r\n              alt=\"Passport\"\r\n              className=\"h-9 w-9 rounded-full object-cover border border-gray-300 shadow\"\r\n            />\r\n          ) : (\r\n            <div className=\"h-9 w-9 rounded-full bg-gradient-to-br from-primary-500 via-accent-orange to-accent-blue flex items-center justify-center text-white font-bold\">\r\n              {user?.name?.charAt(0).toUpperCase()}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}